{{ cookiecutter.project_name }}

This project contains a [AWS serverless application](https://aws.amazon.com/serverless) - a representative Application Programming Interface (API) that allows users to get balance information and post payments. It includes best practices for developing, deploying, and observing serverless applications.

## Dependencies

The sample application uses the Serverless Application Model to build and deploy. requires the following dependencies:

* [AWS SAM CLI](https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/install-sam-cli.html)

* [Python3.9](https://www.python.org/downloads/release/python-390/)

* [Pipenv](https://pipenv.pypa.io/en/latest/)

* Optional: [Docker Desktop](https://www.docker.com/products/docker-desktop/) if deploying and testing locally

## Build

```bash
make build
```


## Deploy to AWS

The first time the Serverless application is deployed, you should use the following command:

```bash
make deploy.guided
```

You will be prompted to provide responses to several questions.

```bash
Setting default arguments for 'sam deploy'
        =========================================
        Stack Name [sam-app]: your-sam-application
        AWS Region [us-east-2]: 
        #Shows you resources changes to be deployed and require a 'Y' to initiate deploy
        Confirm changes before deploy [y/N]: 
        #SAM needs permission to be able to create roles to connect to the resources in your template
        Allow SAM CLI IAM role creation [Y/n]: 
        #Preserves the state of previously provisioned resources when an operation fails
        Disable rollback [y/N]: 
        GetBalanceFunction may not have authorization defined, Is this okay? [y/N]: y
        PostPaymentFunction may not have authorization defined, Is this okay? [y/N]: y
        Save arguments to configuration file [Y/n]: y
        SAM configuration file [samconfig.toml]: 
        SAM configuration environment [default]: 
```

Subsequent deployments can use the simplified following command which uses the `samconfig.toml` file generated by the `make deploy.guided` command.

```bash
make deploy
```

This will deploy your API. The URLs for interacting with `GetBalanceUrl` and `PostPaymentUrl` will be returned when the AWS CloudFormation stack is up and running.

## Next Steps

Now that your Python API has been deployed, you can [interact with it to retrieve a balance and post a payment](./README-INTERACTING-LOCALLY.md).
